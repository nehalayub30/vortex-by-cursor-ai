<?php
/**
 * Template for displaying market predictions.
 *
 * @package    Vortex_AI_Marketplace
 * @subpackage Vortex_AI_Marketplace/includes/frontend/templates
 * 
 * Variables:
 * - $predictions: The market predictions data from the API.
 * - $asset_type: The type of asset.
 * - $time_frame: The time frame for the predictions.
 */

// If this file is called directly, abort.
if ( ! defined( 'ABSPATH' ) ) {
	exit;
}
?>

<div class="vortex-market-predictions">
    <h2><?php echo esc_html( sprintf( __( 'Market Predictions - %s', 'vortex-ai-marketplace' ), ucfirst( $asset_type ) ) ); ?></h2>
    
    <div class="vortex-time-frame">
        <span class="vortex-label"><?php esc_html_e( 'Time Frame:', 'vortex-ai-marketplace' ); ?></span>
        <span class="vortex-value"><?php echo esc_html( $time_frame ); ?></span>
    </div>
    
    <?php if ( isset( $predictions['prediction'] ) ) : ?>
        <div class="vortex-prediction-summary">
            <div class="vortex-prediction-main <?php echo esc_attr( $predictions['prediction'] ); ?>">
                <div class="vortex-prediction-label"><?php esc_html_e( 'Market Trend:', 'vortex-ai-marketplace' ); ?></div>
                <div class="vortex-prediction-value">
                    <?php echo esc_html( ucfirst( $predictions['prediction'] ) ); ?>
                    
                    <?php if ( isset( $predictions['confidence'] ) ) : ?>
                        <span class="vortex-confidence">
                            <?php echo esc_html( sprintf( '(%d%% Confidence)', round( $predictions['confidence'] * 100 ) ) ); ?>
                        </span>
                    <?php endif; ?>
                </div>
            </div>
            
            <div class="vortex-last-updated">
                <span class="vortex-label"><?php esc_html_e( 'Last Updated:', 'vortex-ai-marketplace' ); ?></span>
                <span class="vortex-value">
                    <?php echo esc_html( date_i18n( get_option( 'date_format' ) . ' ' . get_option( 'time_format' ), strtotime( $predictions['last_updated'] ) ) ); ?>
                </span>
            </div>
        </div>
        
        <?php if ( isset( $predictions['supporting_data'] ) && ! empty( $predictions['supporting_data'] ) ) : ?>
            <div class="vortex-supporting-data">
                <h3><?php esc_html_e( 'Supporting Data', 'vortex-ai-marketplace' ); ?></h3>
                
                <div class="vortex-data-metrics">
                    <?php foreach ( $predictions['supporting_data'] as $key => $value ) : ?>
                        <div class="vortex-metric">
                            <span class="vortex-label"><?php echo esc_html( ucwords( str_replace( '_', ' ', $key ) ) ); ?>:</span>
                            <span class="vortex-value">
                                <?php 
                                if ( is_numeric( $value ) ) {
                                    echo round( $value * 100, 2 ) . '%';
                                } else {
                                    echo esc_html( $value );
                                }
                                ?>
                            </span>
                        </div>
                    <?php endforeach; ?>
                </div>
            </div>
        <?php endif; ?>
        
    <?php else : ?>
        <div class="vortex-error">
            <?php esc_html_e( 'No prediction data available.', 'vortex-ai-marketplace' ); ?>
        </div>
    <?php endif; ?>
    
    <div class="vortex-disclaimer">
        <p><?php esc_html_e( 'Disclaimer: These predictions are generated by AI models and should not be considered financial advice. Always do your own research before making investment decisions.', 'vortex-ai-marketplace' ); ?></p>
    </div>
</div> 